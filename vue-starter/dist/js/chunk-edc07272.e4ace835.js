(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edc07272"],{"05d9":function(t,e,a){},3900:function(t,e,a){"use strict";var n=a("05d9"),s=a.n(n);s.a},"8f73":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-card",{attrs:{"no-body":""}},[a("b-card-body",{staticClass:"pb-2"},[a("b-form-group",{attrs:{label:"标题"}},[a("b-input",{model:{value:t.eventData.title,callback:function(e){t.$set(t.eventData,"title",e)},expression:"eventData.title"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"内容"}},[a("b-textarea",{attrs:{rows:3},model:{value:t.eventData.content,callback:function(e){t.$set(t.eventData,"content",e)},expression:"eventData.content"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"最新进展"}},[a("b-textarea",{attrs:{rows:3},model:{value:t.eventData.update,callback:function(e){t.$set(t.eventData,"update",e)},expression:"eventData.update"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"可行性分析"}},[a("b-textarea",{attrs:{rows:3},model:{value:t.eventData.feasibility,callback:function(e){t.$set(t.eventData,"feasibility",e)},expression:"eventData.feasibility"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"标的"}},[a("b-textarea",{attrs:{rows:3},model:{value:t.eventData.target,callback:function(e){t.$set(t.eventData,"target",e)},expression:"eventData.target"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"text-right mt-3"},[a("b-btn",{attrs:{type:"submit",variant:"primary"}},[t._v("提交")]),t._v(" \n      ")],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"font-weight-bold py-3 mb-4"},[t._v("\n    编辑事件\n    "),a("span",{staticClass:"text-muted"})])}],i=(a("1c46"),{name:"pages-article-edit",metaInfo:{title:"资讯发布"},components:{},data:function(){return{user_id:sessionStorage.user_id||localStorage.user_id,token:sessionStorage.token||localStorage.token,username:"",nickname:"",is_employee:"",event_id:"",eventData:{}}},created:function(){this.getId(),this.checkLogin()},beforeDestroy:function(){},destroyed:function(){},mounted:function(){this.renderEvents()},methods:{checkLogin:function(){var t=this;if(this.user_id&&this.token){var e=this.$host+"/user-profile/";this.$ajax.get(e,{headers:{Authorization:"JWT "+this.token},responseType:"json"}).then(function(e){t.user_id=e.data.id,t.username=e.data.username,t.nickname=e.data.nickname,t.is_employee=e.data.is_employee}).catch(function(t){401!=t.response.status&&403!=t.response.status||(location.href="/authentication/login")})}else location.href="/authentication/login"},getId:function(){this.event_id=this.$route.params.id},renderEvents:function(){var t=this,e=this.$host+"/events-detail/"+this.event_id+"/";this.$ajax.get(e).then(function(e){console.log(e.data),t.eventData=e.data})},onSubmit:function(){var t=this.$host+"/events-detail/"+this.event_id+"/editors/";this.username;console.log(this.event_id),this.$ajax.put(t,{event_id:this.event_id,title:this.eventData.title,content:this.eventData.content,update:this.eventData.update,target:this.eventData.target,feasibility:this.eventData.feasibility},{responseType:"json"}).then(function(t){alert("编辑成功"),window.location.reload()}).catch(function(t){400==t.response.status?console.log(t.response.data):console.log(t.response.status)})}}}),o=i,r=(a("60bc"),a("d152"),a("59ec"),a("1c91"),a("3900"),a("2877")),c=Object(r["a"])(o,n,s,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-edc07272.e4ace835.js.map